<!DOCTYPE html>
<html>

<head>
  <title class="titulo1">Leitor de Mangas</title>
  <link rel="stylesheet" href="./src/fontes.css">
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
    crossorigin="anonymous"></script>
  <link rel="shortcut icon" href="https://github.com/oclubedosdez.png" type="image/x-icon">
  <link rel="stylesheet" href="./src/Bootstrap/bootstrap.min.css">
  <script src="https://kit.fontawesome.com/14fa5a8f82.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
  <header class="container2">
    <nav class="navbar navbar-expand-lg navbar-light">
      <a href="#">
        <img class="img_logo" src="https://github.com/oclubedosdez.png" alt="">
      </a>
      <a class="navbar-brand" href="#">
        <i class="fas fa-home"></i> Inicio
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarScroll"
        aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarScroll">
        <ul class="navbar-nav mr-auto my-2 my-lg-0 navbar-nav-scroll" style="max-height: 100px;">
          <li class="nav-item active">
            <a class="nav-link" href="../../index.html"><i class="fas fa-book"></i> Mangás <span
                class="sr-only">(current)</span></a>
          </li>

          <li class="nav-item dropdown hover-dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-expanded="false">
              <i class="fas fa-list"></i> Gêneros
            </a>
            <ul class="dropdown-menu bg-primary">
              <li><a class="dropdown-item" href="#">Ação</a></li>
              <li><a class="dropdown-item" href="../../pages/generos/romance.html">Romance</a></li>
              <li><a class="dropdown-item" href="../../pages/generos/drama.html">Drama</a></li>
              <li><a class="dropdown-item" href="../../pages/generos/fantasia.html">Fantasia</a></li>
              <li><a class="dropdown-item" href="../../pages/generos/isekai.html">Isekai</a></li>
              <li><a class="dropdown-item" href="../../pages/generos/slice-of-life.html">Slice of Life</a></li>
              <li><a class="dropdown-item" href="../../pages/generos/aventura.html">Aventura</a></li>
              <li><a class="dropdown-item" href="../../pages/generos/comedia.html">Comedia</a></li>
              <li><a class="dropdown-item" href="../../pages/generos/todos.html">VER TODOS</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"><i class="fa-solid fa-fire"></i> Em alta</a>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled"></a>
          </li>
        </ul>
      </div>
    </nav>
  </header>


  <!--////////////////////////////////////////////////-->
  <div class="titulo2">
    <h1 id="nome_manga"></h1>

  </div>


  <div class="selecao-e-modo">
    <div class="modo-leitura">
    </div>





    <!--SELECIONAR PAGINAS-->
    <div class="selecao-de-paginas">
      <select id="page-select"></select>
    </div>

    <!--SELECIONAR CAPITULOS-->
    <div class="seletor-de-capitulos">
      <select placeholder="container" id="selecionar" onchange="location.href=this.value" class="">

      </select>

    </div>


    <a class="todos_capitulos" href="../index.html">
      <img src="./bars-solid.svg" alt=""> <span>Todos Capitulos</span>
    </a>


    <div class="botoes_ir_voltar">
      <div class="modo-claro"><span class="img-botao">Modo escuro</span></div>
      <!--botao voltar capitulo anterior-->
      <a class="botao-capitulo-anterior" href="../capitulo - 02/index.html">
        <button class="previous-btn">
          <img src="./arrow-left-solid.svg" alt=""> Anterior</button>
      </a>


      <!--botao proximo capitulo-->
      <a class="botao-avancar-capitulo" href="">
        <button class="next-btn">Próximo <img src="./arrow-right-solid.svg" alt=""></button>
      </a>
    </div>




  </div>


  <div id="page-info"></div>

  <div class="manga-cap">
    <div id="manga-container">
      <img id="manga-image" src="" alt="Manga Image">
    </div>
  </div>



  <div class="botões-de-baixo">
    <a class="botao-capitulo-anterior" href="">
      <button class="previous-btn">
        <img src="./arrow-left-solid.svg" alt=""> Anterior</button>
    </a>

    <a class="todos_capitulos" href="../index.html">
      <img src="./bars-solid.svg" alt=""> <span>Todos Capitulos</span>
    </a>

    <a class="botao-avancar-capitulo" href="">
      <button class="next-btn">Proximo <img src="./arrow-right-solid.svg" alt=""></button>
    </a>
  </div>

  <section class="carrocel_ler_mangas">
    <h1>Leia Tabém</h1>
  </section>

  <div id="carrocel">

    

  </div>





</body>
<script src="./src/Bootstrap/jquery.slim.min.js"></script>
<script src="./src/Bootstrap/bootstrap.bundle.min.js"></script>
<script src="./info-mangas.js"></script>

<script src="./src/script.js"></script>

<script>
  var capitulo = 1;
  var prox_capitulo = capitulo + 1;
  var ant_capitulo = capitulo - 1;


  const mangaImages = [];
  let currentImageIndex = 0;

  const figura = document.createElement('img');


  var diretorio = `${caminho}${capitulo < 10 ? "0" : ""}${capitulo}/imgs/`;





  const mangaImage = document.getElementById("manga-image");
  const previousBtn = document.getElementById("previous-btn");
  const nextBtn = document.getElementById("next-btn");
  const pageSelect = document.getElementById("page-select");
  const pageInfo = document.getElementById("page-info");
  const botao_proximo_capitulo = document.querySelector(".botao-avancar-capitulo")
  const botao_voltar_capitulo = document.querySelector(".botao-capitulo-anterior")
  const botoes_de_baixo = document.querySelector(".botões-de-baixo")
  const capitulo_selecionado = document.getElementById('cap_selecionado')
  const botao_proximo_capitulo_baixo = document.querySelector(".botões-de-baixo .botao-avancar-capitulo")
  const botao_voltar_capitulo_baixo = document.querySelector(".botões-de-baixo .botao-capitulo-anterior")



  titulo1.innerHTML = `${nome_manga} - capitulo ${capitulo < 10 ? "0" : ""}${capitulo}`
  nome.innerHTML = `${nome_manga} - capitulo ${capitulo < 10 ? "0" : ""}${capitulo}`

  //botoes de cima
  botao_proximo_capitulo.href = `./${capitulo < 10 ? "0" : ""}${prox_capitulo}.html`
  botao_voltar_capitulo.href = `./${capitulo < 10 ? "0" : ""}${ant_capitulo}.html`;
  //botoes de baixo
  botao_proximo_capitulo_baixo.href = `./${capitulo < 10 ? "0" : ""}${prox_capitulo}.html`
  botao_voltar_capitulo_baixo.href = `./${capitulo < 10 ? "0" : ""}${ant_capitulo}.html`






  var capitulo_fra = Math.trunc(capitulo)//caso o numero do capitulo seja fracionado;


  select_element[capitulo_fra - 1] = `<option id="cap_selecionado" selected="selected" value="1">capitulo ${capitulo < 10 ? "0" : ""}${capitulo} </option>`


  botoes_de_baixo.classList.add('none')



  // Função para exibir a imagem atual
  function showCurrentImage() {
    mangaImage.src = mangaImages[currentImageIndex];
    updatePageInfo();
  }

  // Função para avançar para a próxima imagem
  function nextImage() {
    if (currentImageIndex < mangaImages.length - 1) {
      currentImageIndex++;
      showCurrentImage();
    }
  }

  // Função para voltar para a imagem anterior
  function previousImage() {
    if (currentImageIndex > 0) {
      currentImageIndex--;
      showCurrentImage();
    }
  }

  // Função para atualizar as informações da página
  function updatePageInfo() {
    const currentPage = currentImageIndex + 1;
    const totalPages = mangaImages.length;
    pageInfo.textContent = `Página ${currentPage} de ${totalPages}`;
    updatePageSelect();
  }

  // Função para atualizar o seletor de página
  function updatePageSelect() {
    pageSelect.innerHTML = "";
    for (let i = 0; i < mangaImages.length; i++) {
      const option = document.createElement("option");
      option.value = i;
      option.text = `Página ${i + 1}`;
      if (i === currentImageIndex) {
        option.selected = true;
      }
      pageSelect.appendChild(option);
    }
  }


  // Evento de alteração no seletor de página
  pageSelect.addEventListener("change", function () {
    currentImageIndex = parseInt(pageSelect.value);
    showCurrentImage();
  });



  // Exibir a imagem inicial e as informações da página
  showCurrentImage();

  const container = document.getElementById('manga-container');
  const pageAberta = document.querySelector('.selecao-de-paginas');
  const seletorCapitulos = document.querySelector('.seletor-de-capitulos');
  const capSelect = document.querySelector('.seletor-de-capitulos select');


  capSelect.innerHTML += select_element;




  container.innerHTML = ''
  container.classList.add('paginas-abertas')

  botoes_de_baixo.classList.remove('none')


  var imagens = [];

  for (let i = 0; i < num_imgs; i++) {
    imagens.push(`${diretorio}${i}.jpg`);
  }

  function adicionarImagem(src) {
    var img = new Image();
    img.src = src;

    img.onload = function () {
      container.appendChild(img);
      carregarProximaImagem();
    };

    img.onerror = function () {
      // A imagem não carregou com sucesso, não faz nada
      carregarProximaImagem();
    };
  }

  function carregarProximaImagem() {
    if (imagens.length > 0) {
      adicionarImagem(imagens.shift()); // Remove a primeira imagem da lista e a carrega
    }
  }
  

  carregarProximaImagem();
</script>

</html>